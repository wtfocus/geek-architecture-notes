[toc]

## 17 | 理论三：里式替换（LSP）跟多态有何区别？哪些代码违背了 LSP?

1. 开篇题
	- 今天，我们来学习SOLID 中的 L 对应的原则：**里式替换原则**。

-   我主要通过几个反倒，带你看看：

    >   哪些代码是违反里式替换原则的？
    >
    >   我们该如何将它们改造成满足里式替换原则？
    >
    >   里式替换原则和多态的区别。

### 如何理解“里式替换原则”？

1. 定义

    >   子类对象能够替换程序中父类对象出现的任何地方，并且保证原来程序的逻辑行为不变及正非确性不被破坏。

2. 多态 vs 里氏替换原则

    -   **多态**，是面向对象编程的一大**特性**，也是面向对象编程语言的一种**语法**。它是一种**代码实现**的思路。

    -   **里式替换**，是一种**设计原则**，是用来指导继承关系中子类该如何**设计**。

    	> 子类的设计要保证在替换父类的时候，不改变原有程序的逻辑以及不破坏原有程序的正确性。

### 哪些代码明显违背了 LSP?

1. **“按照协议来设计”**

    - 解读：

        >   子类有设计的时候，要遵守父类的**行为约定（或叫协议）**。父类定义了函数的行为约定，那子类可以改变函数的内部实现逻辑，但不能改变函数原有的行为约定。
        >
        >   
        >
        >   这里的**行为约定**包括
        >
        >   ​		函数声明要实现的功能; 
        >
        >   ​		对输入、输出、异常的约定;
        >
        >   ​		甚至包括注释中所罗列的任何特殊说明。
    
2. 反例

    1.  **子类违背父类声明要实现的功能**
    2.  **子类违背父类对输入、输出、异常的约定**
    3.  **子类违背父类注释中所罗列的任何特殊说明**

    



